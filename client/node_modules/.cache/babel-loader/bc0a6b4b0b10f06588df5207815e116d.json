{"ast":null,"code":"var _jsxFileName = \"/Users/husnimbark/Documents/Books/ways-books/client/src/components/modal/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { Modal, Button, Col, Form } from \"react-bootstrap\";\nimport * as Icon from \"react-bootstrap-icons\";\nimport { API } from \"../../config/api\";\nimport { UserContext } from \"../../context/UserContext\";\nimport { Alert } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useMutation } from \"react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(_ref) {\n  _s();\n\n  let {\n    show,\n    handleLogin,\n    handleClose,\n    switchRegister\n  } = _ref;\n  let history = useNavigate();\n  let api = API();\n  const [state, dispatch] = useContext(UserContext);\n  const [message, setMessage] = useState(null);\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    email,\n    password\n  } = form;\n\n  const handleChange = e => {\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = useMutation(async e => {\n    try {\n      e.preventDefault(); // Data body\n\n      const body = JSON.stringify(form); // Configuration\n\n      const config = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: body\n      }; // Insert data for login process\n\n      const response = await api.post(\"/login\", config);\n      console.log(response); // Checking process\n\n      if (response.status == \"success\") {\n        // Send data to useContext\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: response.data\n        }); // Status check\n\n        if (response.data.status == \"admin\") {\n          history.push(\"/book=list\");\n        } else {\n          history.push(\"/homepage\");\n        }\n\n        const alert = /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"success\",\n          className: \"py-1\",\n          children: \"Login success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this);\n\n        setMessage(alert);\n      } else {\n        const alert = /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          className: \"py-1\",\n          children: \"Login failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this);\n\n        setMessage(alert);\n      }\n    } catch (error) {\n      const alert = /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"py-1\",\n        children: \"Login failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this);\n\n      setMessage(alert);\n      console.log(error);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    centered: true,\n    children: /*#__PURE__*/_jsxDEV(Modal.Body, {\n      className: \"text-dark\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-auth p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-end fs-3 fa-2x\",\n            \"aria-hidden\": \"true\",\n            onClick: handleClose,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-white border-0 fw-bold\",\n              children: /*#__PURE__*/_jsxDEV(Icon.XLg, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3 f-1 fs-2 fw-bold\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), message && message, /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: e => handleSubmit.mutate(e),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                autoFocus: true,\n                type: \"email\",\n                placeholder: \"Email\",\n                value: email,\n                onChange: handleChange,\n                name: \"email\",\n                className: \"form-control py-2 mt-4 f-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                autoFocus: true,\n                type: \"password\",\n                placeholder: \"Password\",\n                value: password,\n                onChange: handleChange,\n                name: \"password\",\n                className: \"form-control py-2 mt-4 f-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2 mt-5 pb-3\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn btn-dark f-2 fw-bold\",\n                type: \"submit\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"f-2\",\n              children: [\"Don't have an account ?\", /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bg-white border-0 fw-bold\",\n                onClick: switchRegister,\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"yx/4kM7ZsqX1wE4bLSMAUVEQa3g=\", false, function () {\n  return [useNavigate, useMutation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useContext","Modal","Button","Col","Form","Icon","API","UserContext","Alert","useNavigate","useMutation","Login","show","handleLogin","handleClose","switchRegister","history","api","state","dispatch","message","setMessage","form","setForm","email","password","handleChange","e","target","name","value","handleSubmit","preventDefault","body","JSON","stringify","config","method","headers","response","post","console","log","status","type","payload","data","push","alert","error","mutate"],"sources":["/Users/husnimbark/Documents/Books/ways-books/client/src/components/modal/Login.js"],"sourcesContent":["import { useState , useContext } from \"react\";\nimport { Modal, Button, Col, Form } from \"react-bootstrap\";\nimport * as Icon from \"react-bootstrap-icons\";\nimport { API } from \"../../config/api\";\nimport { UserContext } from \"../../context/UserContext\";\nimport { Alert } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useMutation } from \"react-query\";\n\nfunction Login({ show ,handleLogin , handleClose, switchRegister}) {\n \n\n  \n    let history = useNavigate();\n    let api = API();\n  \n    const [state, dispatch] = useContext(UserContext);\n  \n    const [message, setMessage] = useState(null);\n    const [form, setForm] = useState({\n      email: \"\",\n      password: \"\",\n    });\n  \n    const { email, password } = form;\n  \n    const handleChange = (e) => {\n      setForm({\n        ...form,\n        [e.target.name]: e.target.value,\n      });\n    };\n  \n    const handleSubmit = useMutation(async (e) => {\n      try {\n        e.preventDefault();\n  \n        // Data body\n        const body = JSON.stringify(form);\n  \n        // Configuration\n        const config = {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: body,\n        };\n  \n        // Insert data for login process\n        const response = await api.post(\"/login\", config);\n  \n        console.log(response);\n  \n        // Checking process\n        if (response.status == \"success\") {\n          // Send data to useContext\n          dispatch({\n            type: \"LOGIN_SUCCESS\",\n            payload: response.data,\n          });\n  \n          // Status check\n          if (response.data.status == \"admin\") {\n            history.push(\"/book=list\");\n          } else {\n            history.push(\"/homepage\");\n          }\n  \n          const alert = (\n            <Alert variant=\"success\" className=\"py-1\">\n              Login success\n            </Alert>\n          );\n          setMessage(alert);\n        } else {\n          const alert = (\n            <Alert variant=\"danger\" className=\"py-1\">\n              Login failed\n            </Alert>\n          );\n          setMessage(alert);\n        }\n      } catch (error) {\n        const alert = (\n          <Alert variant=\"danger\" className=\"py-1\">\n            Login failed\n          </Alert>\n        );\n        setMessage(alert);\n        console.log(error);\n      }\n    });\n\n  return (\n    <Modal show={show} centered>\n      <Modal.Body className=\"text-dark\">\n        <div className=\"justify-content-center\">\n          <div className=\"card-auth p-4\">\n            <div\n              className=\"d-flex justify-content-end fs-3 fa-2x\"\n              aria-hidden=\"true\"\n              onClick={handleClose}\n            >\n              <button className=\"bg-white border-0 fw-bold\"> \n              <Icon.XLg />\n              </button>\n            </div>\n            <div className=\"mb-3 f-1 fs-2 fw-bold\">Login</div>\n           \n            {message && message}\n            <Form onSubmit={(e) => handleSubmit.mutate(e)}>\n              <div>\n                <input\n                  autoFocus\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  value={email}\n                  onChange={handleChange}\n                  name=\"email\"\n                  className=\"form-control py-2 mt-4 f-2\"\n                />\n              </div>\n              <div>\n                <input\n                  autoFocus\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  value={password}\n                  onChange={handleChange}\n                  name=\"password\"\n                  className=\"form-control py-2 mt-4 f-2\"\n                />\n              </div>\n        \n            <div className=\"d-grid gap-2 mt-5 pb-3\">\n              <Button\n                className=\"btn btn-dark f-2 fw-bold\"\n                type=\"submit\"\n              >\n                Login\n              </Button>\n            </div>\n            </Form>\n\n            <div>\n              <p className=\"f-2\">\n                Don't have an account ?<button className=\"bg-white border-0 fw-bold\" onClick={switchRegister}>Register</button>\n              </p>\n              \n            </div>\n          </div>\n        </div>\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}