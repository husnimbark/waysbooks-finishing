{"ast":null,"code":"var _jsxFileName = \"/Users/husnimbark/Documents/Books/ways-books/src/pages/Complain.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport Navbar from \"../components/navbar/NavbarUser\";\nimport Contact from \"../components/complain/Contact\";\nimport Chat from \"../components/complain/Chat\";\nimport { userContext } from \"../context/userContext\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet socket;\nexport default function Complain() {\n  _s();\n\n  const [contact, setContact] = useState(null);\n  const [contacts, setContacts] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const title = \"Complain\";\n  document.title = \"DumbMerch | \" + title; // const [state] = useContext(userContext);\n  // useEffect(() => {\n  //   socket = io(\"http://localhost:4000\", {\n  //     auth: {\n  //       token: localStorage.getItem(\"token\"),\n  //     },\n  //     query: {\n  //       id: state.user.id,\n  //     },\n  //   });\n  //   socket.on(\"new message\", () => {\n  //     socket.emit(\"load messages\", contact?.id);\n  //   });\n  //   socket.on(\"connect_error\", (err) => {\n  //     console.error(err.message);\n  //   });\n  //   loadContact();\n  //   loadMessages();\n  //   return () => {\n  //     socket.disconnect();\n  //   };\n  // } [messages];\n  // const loadContact = () => {\n  //   socket.emit(\"load admin contact\");\n  //   socket.on(\"admin contact\", async (data) => {\n  //     const dataContact = {\n  //       ...data,\n  //       message:\n  //         messages.length > 0\n  //           ? messages[messages.length - 1].message\n  //           : \"Click here to start message\",\n  //     };\n  //     setContacts([dataContact]);\n  //   });\n  // };\n  // const onClickContact = (data) => {\n  //   setContact(data);\n  //   socket.emit(\"load messages\", data.id);\n  // };\n  // const loadMessages = (value) => {\n  //   socket.on(\"messages\", async (data) => {\n  //     if (data.length > 0) {\n  //       const dataMessages = data.map((item) => ({\n  //         idSender: item.sender.id,\n  //         message: item.message,\n  //       }));\n  //       setMessages(dataMessages);\n  //     }\n  //     const chatMessagesElm = document.getElementById(\"chat-messages\");\n  //     chatMessagesElm.scrollTop = chatMessagesElm?.scrollHeight;\n  //   });\n  // };\n  // const onSendMessage = (e) => {\n  //   if (e.key === \"Enter\") {\n  //     const data = {\n  //       idRecipient: contact.id,\n  //       message: e.target.value,\n  //     };\n  //     socket.emit(\"send message\", data);\n  //     e.target.value = \"\";\n  //   };\n  // };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavbarUser, {\n      title: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      style: {\n        height: \"89.5vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          style: {\n            height: \"89.5vh\"\n          },\n          className: \"px-3 border-end border-dark overflow-auto rounded rounded-5\",\n          children: /*#__PURE__*/_jsxDEV(Contact, {\n            dataContact: contacts // clickContact={onClickContact}\n            ,\n            contact: contact\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 9,\n          style: {\n            maxHeight: \"89.5vh\"\n          },\n          className: \"px-0\",\n          children: /*#__PURE__*/_jsxDEV(Chat, {\n            contact: contact,\n            messages: messages // user={state.user}\n            // sendMessage={onSendMessage}\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Complain, \"63hNmqoFVaq/puK3kcVA4Fjk1IA=\");\n\n_c = Complain;\n\nvar _c;\n\n$RefreshReg$(_c, \"Complain\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Container","Row","Col","Navbar","Contact","Chat","userContext","io","socket","Complain","contact","setContact","contacts","setContacts","messages","setMessages","title","document","height","maxHeight"],"sources":["/Users/husnimbark/Documents/Books/ways-books/src/pages/Complain.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\n\nimport Navbar from \"../components/navbar/NavbarUser\";\n\nimport Contact from \"../components/complain/Contact\";\n\nimport Chat from \"../components/complain/Chat\";\n\nimport { userContext } from \"../context/userContext\";\n\nimport { io } from \"socket.io-client\";\n\nlet socket;\nexport default function Complain() {\n  const [contact, setContact] = useState(null);\n  const [contacts, setContacts] = useState([]);\n  const [messages, setMessages] = useState([]);\n\n  const title = \"Complain\";\n  document.title = \"DumbMerch | \" + title;\n\n  // const [state] = useContext(userContext);\n\n  // useEffect(() => {\n  //   socket = io(\"http://localhost:4000\", {\n  //     auth: {\n  //       token: localStorage.getItem(\"token\"),\n  //     },\n  //     query: {\n  //       id: state.user.id,\n  //     },\n  //   });\n\n  //   socket.on(\"new message\", () => {\n  //     socket.emit(\"load messages\", contact?.id);\n  //   });\n\n  //   socket.on(\"connect_error\", (err) => {\n  //     console.error(err.message);\n  //   });\n  //   loadContact();\n  //   loadMessages();\n\n  //   return () => {\n  //     socket.disconnect();\n  //   };\n  // } [messages];\n\n  // const loadContact = () => {\n  //   socket.emit(\"load admin contact\");\n  //   socket.on(\"admin contact\", async (data) => {\n  //     const dataContact = {\n  //       ...data,\n  //       message:\n  //         messages.length > 0\n  //           ? messages[messages.length - 1].message\n  //           : \"Click here to start message\",\n  //     };\n  //     setContacts([dataContact]);\n  //   });\n  // };\n\n  // const onClickContact = (data) => {\n  //   setContact(data);\n  //   socket.emit(\"load messages\", data.id);\n  // };\n\n  // const loadMessages = (value) => {\n  //   socket.on(\"messages\", async (data) => {\n  //     if (data.length > 0) {\n  //       const dataMessages = data.map((item) => ({\n  //         idSender: item.sender.id,\n  //         message: item.message,\n  //       }));\n\n  //       setMessages(dataMessages);\n  //     }\n  //     const chatMessagesElm = document.getElementById(\"chat-messages\");\n  //     chatMessagesElm.scrollTop = chatMessagesElm?.scrollHeight;\n  //   });\n  // };\n  // const onSendMessage = (e) => {\n  //   if (e.key === \"Enter\") {\n  //     const data = {\n  //       idRecipient: contact.id,\n  //       message: e.target.value,\n  //     };\n\n  //     socket.emit(\"send message\", data);\n  //     e.target.value = \"\";\n  //   };\n  // };\n\n  return (\n    <>\n      <NavbarUser title={title} />\n      <Container fluid style={{ height: \"89.5vh\" }}>\n        <Row>\n          <Col\n            md={3}\n            style={{ height: \"89.5vh\" }}\n            className=\"px-3 border-end border-dark overflow-auto rounded rounded-5\"\n          >\n            <Contact\n              dataContact={contacts}\n              // clickContact={onClickContact}\n              contact={contact}\n            />\n          </Col>\n          <Col md={9} style={{ maxHeight: \"89.5vh\" }} className=\"px-0\">\n            <Chat\n              contact={contact}\n              messages={messages}\n              // user={state.user}\n              // sendMessage={onSendMessage}\n            />\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,QAAoC,iBAApC;AAEA,OAAOC,MAAP,MAAmB,iCAAnB;AAEA,OAAOC,OAAP,MAAoB,gCAApB;AAEA,OAAOC,IAAP,MAAiB,6BAAjB;AAEA,SAASC,WAAT,QAA4B,wBAA5B;AAEA,SAASC,EAAT,QAAmB,kBAAnB;;;AAEA,IAAIC,MAAJ;AACA,eAAe,SAASC,QAAT,GAAoB;EAAA;;EACjC,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACiB,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAC,EAAD,CAAxC;EAEA,MAAMmB,KAAK,GAAG,UAAd;EACAC,QAAQ,CAACD,KAAT,GAAiB,iBAAiBA,KAAlC,CANiC,CAQjC;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;;EAEA,oBACE;IAAA,wBACE,QAAC,UAAD;MAAY,KAAK,EAAEA;IAAnB;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,SAAD;MAAW,KAAK,MAAhB;MAAiB,KAAK,EAAE;QAAEE,MAAM,EAAE;MAAV,CAAxB;MAAA,uBACE,QAAC,GAAD;QAAA,wBACE,QAAC,GAAD;UACE,EAAE,EAAE,CADN;UAEE,KAAK,EAAE;YAAEA,MAAM,EAAE;UAAV,CAFT;UAGE,SAAS,EAAC,6DAHZ;UAAA,uBAKE,QAAC,OAAD;YACE,WAAW,EAAEN,QADf,CAEE;YAFF;YAGE,OAAO,EAAEF;UAHX;YAAA;YAAA;YAAA;UAAA;QALF;UAAA;UAAA;UAAA;QAAA,QADF,eAYE,QAAC,GAAD;UAAK,EAAE,EAAE,CAAT;UAAY,KAAK,EAAE;YAAES,SAAS,EAAE;UAAb,CAAnB;UAA4C,SAAS,EAAC,MAAtD;UAAA,uBACE,QAAC,IAAD;YACE,OAAO,EAAET,OADX;YAEE,QAAQ,EAAEI,QAFZ,CAGE;YACA;;UAJF;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAZF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA,gBADF;AA2BG;;GA3GmBL,Q;;KAAAA,Q"},"metadata":{},"sourceType":"module"}